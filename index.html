<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BRU WEB Academy | by Ineza Aime Bruno</title>
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500&family=Roboto:wght@400;500;700&display=swap">
  
  <style>
    :root {
      --bg: #ffffff;
      --text: #222;
      --gray: #555;
      --lightgray: #f4f4f4;
      --border: #d4d4d4;
      --accent: #04AA6D;
      --accent-dark: #038c5a;
      --editor-bg: #fdfdfd;
      --console-bg: #1e1e1e;
      --console-text: #d4d4d4;
      --modal-bg: rgba(0,0,0,0.5);
    }

    [data-theme="dark"] {
      --bg: #1a1a1a;
      --text: #e0e0e0;
      --gray: #aaa;
      --lightgray: #2d2d2d;
      --border: #444;
      --editor-bg: #222;
      --console-bg: #0d1117;
      --console-text: #c9d1d9;
      --modal-bg: rgba(0,0,0,0.7);
    }

    * { box-sizing: border-box; margin:0; padding:0; }
    html, body { height: 100%; font-family: 'Roboto', sans-serif; background: var(--bg); color: var(--text); overflow: hidden; }

    .app { height: 100vh; display: flex; flex-direction: column; }

    header {
      height: 54px;
      background: var(--lightgray);
      border-bottom: 1px solid var(--border);
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand { font-weight: 700; color: var(--accent); }
    .brand small { font-weight: normal; color: var(--gray); font-size: 12px; margin-left: 8px; }

    .btn {
      padding: 6px 14px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }

    .btn:hover { background: rgba(0,0,0,0.06); }
    .btn-primary { background: var(--accent); color: white; border-color: var(--accent); }
    .btn-primary:hover { background: var(--accent-dark); }

    .main { flex: 1; display: flex; overflow: hidden; }

    .pane { display: flex; flex-direction: column; background: var(--lightgray); border-right: 1px solid var(--border); }
    #docs { width: 320px; min-width: 280px; }
    #editor-pane { flex: 1; min-width: 500px; background: var(--editor-bg); }

    .resizer { width: 5px; background: var(--border); cursor: col-resize; }
    .resizer:hover { background: var(--accent); }

    .pane-header {
      padding: 10px 16px;
      background: var(--lightgray);
      border-bottom: 1px solid var(--border);
      font-size: 13px;
      font-weight: 600;
      color: var(--gray);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .lang-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 10px 16px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      overflow-y: auto;
      max-height: 140px;
    }

    .lang-btn {
      padding: 6px 12px;
      font-size: 12px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      border-radius: 4px;
      cursor: pointer;
    }

    .lang-btn.active, .lang-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(4,170,109,0.08);
    }

    .scroll { flex: 1; overflow-y: auto; padding: 20px; line-height: 1.6; font-size: 14px; }

    #editor, #compiler-editor {
      flex: 1;
      width: 100%;
      padding: 20px;
      font-family: 'Source Code Pro', monospace;
      font-size: 15px;
      line-height: 1.5;
      background: transparent;
      color: var(--text);
      border: none;
      outline: none;
      resize: none;
      tab-size: 2;
    }

    .preview-area {
      height: 38%;
      border-top: 1px solid var(--border);
      position: relative;
      background: white;
    }

    iframe { width: 100%; height: 100%; border: none; }

    #console, #compiler-output {
      position: absolute;
      inset: 0;
      background: var(--console-bg);
      color: var(--console-text);
      padding: 16px;
      font-family: 'Source Code Pro', monospace;
      font-size: 14px;
      overflow-y: auto;
      white-space: pre-wrap;
      margin: 0;
    }

    footer {
      height: 34px;
      background: var(--lightgray);
      border-top: 1px solid var(--border);
      padding: 0 16px;
      font-size: 12px;
      color: var(--gray);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #compiler-mode { display: none; flex: 1; flex-direction: row; }
    #code-input-pane { flex: 1; display: flex; flex-direction: column; background: var(--editor-bg); border-right: 1px solid var(--border); }
    #output-pane { flex: 1; display: flex; flex-direction: column; background: var(--bg); }
    #compiler-preview { flex: 1; border: none; display: none; }

    #ai-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: var(--modal-bg);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    #ai-container {
      width: 90%;
      height: 90%;
      background: var(--bg);
      border-radius: 8px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    #ai-header {
      padding: 10px;
      background: var(--lightgray);
      display: flex;
      justify-content: space-between;
    }

    #ai-iframe { flex: 1; border: none; }
  </style>
</head>
<body data-theme="light">

<div class="app">
  <header>
    <div class="brand">BRU WEB ACADEMY <small>by Ineza Aime Bruno</small></div>
    <div style="display:flex; gap:10px; flex-wrap: wrap;">
      <button class="btn" onclick="toggleTheme()">Toggle Dark Mode</button>
      <button class="btn" onclick="toggleQuizMode()">Quiz Mode</button>
      <button class="btn" onclick="formatCode()">Format Code</button>
      <button class="btn btn-primary" onclick="runCode()">Run</button>
      <button class="btn btn-primary" id="compiler-toggle" onclick="toggleCompilerMode()">Compiler Mode</button>
      <button class="btn" onclick="openAI()">AI Assistant</button>
    </div>
  </header>

  <div class="main" id="main-view">
    <div class="pane" id="docs">
      <div class="lang-buttons" id="lang-buttons"></div>
      <div class="pane-header">Documentation & Examples</div>
      <div class="scroll" id="docs-content"></div>
    </div>

    <div class="resizer" id="resize1"></div>

    <div class="pane" id="editor-pane">
      <div class="pane-header">
        <span>Editor — <span id="lang-name">HTML</span></span>
      </div>
      <textarea id="editor" spellcheck="false"></textarea>
      <div class="preview-area">
        <iframe id="preview"></iframe>
        <pre id="console"></pre>
      </div>
    </div>
  </div>

  <!-- Compiler Mode -->
  <div id="compiler-mode">
    <div id="code-input-pane">
      <div class="pane-header">
        <span>Code — <span id="compiler-lang-name">HTML</span></span>
        <div>
          <button class="btn" onclick="toggleCompilerMode()">Back</button>
          <button class="btn btn-primary" onclick="runCompilerCode()">Run</button>
        </div>
      </div>
      <textarea id="compiler-editor" spellcheck="false"></textarea>
    </div>
    <div id="output-pane">
      <div class="pane-header"><span>Output</span></div>
      <iframe id="compiler-preview" style="display:none;"></iframe>
      <pre id="compiler-output"></pre>
    </div>
  </div>

  <!-- Quiz Pane -->
  <div id="quiz-pane" style="display:none; flex-direction:column;">
    <div class="pane-header">
      <span>Quiz — <span id="quiz-lang-name"></span></span>
      <button class="btn" onclick="toggleQuizMode()">Back</button>
    </div>
    <div id="quiz-questions" class="scroll"></div>
    <div style="padding:16px; text-align:center;">
      <button class="btn btn-primary" onclick="checkQuizAnswers()">Check Answers</button>
    </div>
  </div>

  <!-- AI Modal -->
  <div id="ai-modal" onclick="closeAI()">
    <div id="ai-container" onclick="event.stopPropagation()">
      <div id="ai-header">
        <span>BRU AI Assistant</span>
        <button class="btn" onclick="closeAI()">Close</button>
      </div>
      <iframe id="ai-iframe" src="https://bru-ai.vercel.app/" title="AI"></iframe>
    </div>
  </div>

  <footer>
    <span>© 2026 — Ineza Aime Bruno</span>
    <span>100% Browser – No API – Works Offline</span>
  </footer>
</div>

<script>
// ────────────────────────────────────────────────
// Language data (deep explanations + quiz)
// ────────────────────────────────────────────────
const languages = [
  "html", "css", "javascript", "sql", "php", "python",
  "java", "angular", "react", "bootstrap", "nodejs",
  "jquery", "typescript", "ruby", "asp", "aspnet"
];

const content = {
  html: {
    title: "HTML5 – Structure of the Web",
    text: `
<p><b>HTML</b> (HyperText Markup Language) is the standard language for creating web pages. It defines the structure and content using tags.</p>

<h4>Core Concepts</h4>
<ul>
  <li><code>&lt;!DOCTYPE html&gt;</code> – tells browser it's HTML5</li>
  <li><code>&lt;html lang="en"&gt;</code> – root element</li>
  <li><code>&lt;head&gt;</code> – metadata (title, charset, viewport)</li>
  <li><code>&lt;body&gt;</code> – visible content</li>
</ul>

<h4>Semantic Tags (very important in 2025+)</h4>
<ul>
  <li><code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code></li>
  <li><code>&lt;article&gt;</code>, <code>&lt;section&gt;</code>, <code>&lt;aside&gt;</code>, <code>&lt;footer&gt;</code></li>
</ul>

<h4>Forms & Input</h4>
<pre><code>&lt;input type="email" required placeholder="you@email.com"&gt;</code></pre>

<p><b>Bruno Tip:</b> Always use semantic tags → better SEO, accessibility, future-proof code.</p>
    `,
    starter: `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Page</title>
</head>
<body>
  <h1>Hello from BRU Academy</h1>
  <p>Success is engineered.</p>
</body>
</html>`,
    quiz: [
      { q: "What does HTML stand for?", a: "HyperText Markup Language", opts: ["HyperText Machine Language", "High Text Markup Language", "HyperText Markup Language", "Home Tool Markup Language"] },
      { q: "Which tag is the root element?", a: "<html>", opts: ["<body>", "<head>", "<html>", "<page>"] },
      { q: "Best tag for main navigation?", a: "<nav>", opts: ["<menu>", "<nav>", "<sidebar>", "<links>"] }
    ]
  },

  css: {
    title: "CSS3 – Styling & Layout",
    text: `
<p><b>CSS</b> controls how HTML looks: colors, sizes, positions, animations.</p>

<h4>Selectors</h4>
<ul>
  <li>Element: <code>p { color: blue; }</code></li>
  <li>Class: <code>.box { }</code></li>
  <li>ID: <code>#header { }</code></li>
</ul>

<h4>Modern Layouts</h4>
<ul>
  <li>Flexbox: <code>display: flex;</code></li>
  <li>Grid: <code>display: grid; grid-template-columns: 1fr 1fr;</code></li>
</ul>

<h4>Variables (Custom Properties)</h4>
<pre><code>:root { --primary: #04AA6D; }
button { background: var(--primary); }</code></pre>

<p><b>Bruno Tip:</b> Master Flexbox + Grid in 2025 – most websites use them.</p>
    `,
    starter: `body { font-family: Arial; background: #f8f9fa; }
.card { 
  width: 300px; margin: 40px auto; 
  padding: 20px; border-radius: 8px; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
}`,
    quiz: [
      { q: "What does CSS stand for?", a: "Cascading Style Sheets", opts: ["Creative Style Sheets", "Computer Style Sheets", "Cascading Style Sheets", "Colorful Style System"] },
      { q: "Property to center items in flex?", a: "justify-content: center;", opts: ["align-items", "justify-content", "center-items", "flex-center"] }
    ]
  },

  javascript: {
    title: "JavaScript – Making Websites Interactive",
    text: `
<p><b>JavaScript (ES6+)</b> adds logic, events, DOM manipulation, async operations.</p>

<h4>Modern Features</h4>
<ul>
  <li>const / let</li>
  <li>Arrow functions: <code>() => {}</code></li>
  <li>Template literals: <code>\`Hello \${name}\`</code></li>
  <li>Destructuring, spread: <code>{...obj}</code></li>
  <li>async / await</li>
</ul>

<h4>DOM Example</h4>
<pre><code>document.querySelector('button').addEventListener('click', () => {
  alert('Clicked!');
});</code></pre>

<p><b>Bruno Tip:</b> Learn async/await + fetch for real apps in 2025.</p>
    `,
    starter: `console.log("Hello from JavaScript!");

const btn = document.createElement('button');
btn.textContent = "Click me";
btn.onclick = () => alert("You clicked!");
document.body.appendChild(btn);`,
    quiz: [
      { q: "Which declares a constant?", a: "const", opts: ["var", "let", "const", "final"] },
      { q: "How to get element by ID?", a: "document.getElementById", opts: ["querySelector", "getElementById", "findById", "select"] }
    ]
  },

  // You can continue adding more languages with similar structure
  // For now we include just 3 to keep code short – add others when you want
  python: {
    title: "Python – Clean & Powerful",
    text: `<p>Python is excellent for backend, data, AI, automation.</p>
<p><b>Bruno Tip:</b> Use list comprehensions and f-strings.</p>`,
    starter: `print("Hello from Python simulation!")
names = ["Ineza", "Bruno"]
for name in names:
    print(f"Welcome, {name}!")`,
    quiz: []
  }
};

// Fill missing languages with minimal data
languages.forEach(lang => {
  if (!content[lang]) {
    content[lang] = {
      title: lang.toUpperCase(),
      text: `<p>Documentation for <b>${lang.toUpperCase()}</b> coming soon...</p><p>Start coding and ask BRU AI for help!</p>`,
      starter: `// ${lang.toUpperCase()} example\nconsole.log("Hello ${lang}!");`,
      quiz: []
    };
  }
});

let currentLang = "html";
let isQuizMode = false;
let isCompilerMode = false;

// ────────────────────────────────────────────────
// Load language
// ────────────────────────────────────────────────
function loadLanguage(lang) {
  currentLang = lang;
  const data = content[lang];

  document.getElementById("lang-name").textContent = lang.toUpperCase();
  document.getElementById("docs-content").innerHTML = `<h2>${data.title}</h2>${data.text}`;
  document.getElementById("editor").value = data.starter;

  document.querySelectorAll(".lang-btn").forEach(b => {
    b.classList.toggle("active", b.dataset.lang === lang);
  });

  document.getElementById("compiler-lang-name").textContent = lang.toUpperCase();
  document.getElementById("quiz-lang-name").textContent = lang.toUpperCase();

  runCode();
}

// ────────────────────────────────────────────────
// Run code – real for HTML/JS, simulated for others
// ────────────────────────────────────────────────
function runCode() {
  const code = document.getElementById("editor").value.trim();
  const preview = document.getElementById("preview");
  const consoleEl = document.getElementById("console");

  consoleEl.textContent = "";
  preview.style.display = "none";
  consoleEl.style.display = "block";

  if (currentLang === "html" || currentLang === "css") {
    preview.style.display = "block";
    consoleEl.style.display = "none";
    const doc = preview.contentDocument || preview.contentWindow.document;
    doc.open();
    doc.write(code);
    doc.close();
  } else if (currentLang === "javascript") {
    let output = "";
    const originalLog = console.log;
    console.log = (...args) => { output += args.map(a => String(a)).join(" ") + "\n"; };
    try {
      eval(code);
      consoleEl.textContent = output || "Executed (no output)";
    } catch (e) {
      consoleEl.textContent = "Error: " + e.message;
    }
    console.log = originalLog;
  } else {
    consoleEl.textContent = `// ${currentLang.toUpperCase()} simulation\n${code}\n\n→ Would run successfully in real environment\n→ Output depends on the code logic`;
  }
}

function runCompilerCode() {
  const code = document.getElementById("compiler-editor").value.trim();
  const preview = document.getElementById("compiler-preview");
  const output = document.getElementById("compiler-output");

  output.textContent = "Running...\n";
  preview.style.display = "none";
  output.style.display = "block";

  if (currentLang === "html" || currentLang === "css") {
    preview.style.display = "block";
    output.style.display = "none";
    const doc = preview.contentDocument;
    doc.open();
    doc.write(code);
    doc.close();
  } else if (currentLang === "javascript") {
    let out = "";
    const log = console.log;
    console.log = (...a) => out += a.join(" ") + "\n";
    try { eval(code); output.textContent = out || "Done"; }
    catch (e) { output.textContent = "Error:\n" + e.message; }
    console.log = log;
  } else {
    output.textContent = `${code}\n\n→ Simulated execution for ${currentLang.toUpperCase()}\n→ No real runtime in browser for this language`;
  }
}

// ────────────────────────────────────────────────
// Compiler Mode
// ────────────────────────────────────────────────
function toggleCompilerMode() {
  isCompilerMode = !isCompilerMode;
  document.getElementById("main-view").style.display = isCompilerMode ? "none" : "flex";
  document.getElementById("quiz-pane").style.display = "none";
  document.getElementById("compiler-mode").style.display = isCompilerMode ? "flex" : "none";
  if (isCompilerMode) {
    document.getElementById("compiler-editor").value = document.getElementById("editor").value;
    runCompilerCode();
  }
}

// ────────────────────────────────────────────────
// Theme, Quiz, AI, Format, Auto-close
// ────────────────────────────────────────────────
function toggleTheme() {
  document.body.dataset.theme = document.body.dataset.theme === "dark" ? "light" : "dark";
}

function toggleQuizMode() {
  isQuizMode = !isQuizMode;
  document.getElementById("main-view").style.display = isQuizMode ? "none" : "flex";
  document.getElementById("compiler-mode").style.display = "none";
  document.getElementById("quiz-pane").style.display = isQuizMode ? "flex" : "none";
  if (isQuizMode) loadQuiz();
}

function loadQuiz() {
  const qz = content[currentLang]?.quiz || [];
  const container = document.getElementById("quiz-questions");
  container.innerHTML = "";
  if (qz.length === 0) {
    container.innerHTML = "<p>No quiz available for this language yet.</p>";
    return;
  }
  qz.forEach((item, i) => {
    const div = document.createElement("div");
    div.innerHTML = `<h4>${i+1}. ${item.q}</h4>`;
    item.opts.forEach((opt, j) => {
      const label = document.createElement("label");
      label.style.display = "block";
      label.style.padding = "8px";
      label.style.border = "1px solid var(--border)";
      label.style.margin = "4px 0";
      label.style.cursor = "pointer";
      label.style.borderRadius = "4px";
      label.innerHTML = `<input type="radio" name="q${i}" value="${j}"> ${opt}`;
      div.appendChild(label);
    });
    container.appendChild(div);
  });
}

function checkQuizAnswers() {
  const qz = content[currentLang]?.quiz || [];
  let correct = 0;
  qz.forEach((item, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    if (selected && item.opts[parseInt(selected.value)] === item.a) correct++;
  });
  alert(`Score: ${correct} / ${qz.length}\nKeep learning!`);
}

function openAI()  { document.getElementById("ai-modal").style.display = "flex"; }
function closeAI() { document.getElementById("ai-modal").style.display = "none"; }

function formatCode() {
  const ed = document.getElementById(isCompilerMode ? "compiler-editor" : "editor");
  let lines = ed.value.split("\n");
  let indent = 0;
  lines = lines.map(line => {
    let trimmed = line.trim();
    if (trimmed.startsWith("}") || trimmed.startsWith("</")) indent = Math.max(0, indent - 2);
    let formatted = " ".repeat(indent) + trimmed;
    if (trimmed.endsWith("{") || trimmed.endsWith("(") || trimmed.startsWith("<") && !trimmed.startsWith("</")) indent += 2;
    return formatted;
  });
  ed.value = lines.join("\n");
}

// Auto close brackets & tags
function setupAutoComplete(id) {
  const el = document.getElementById(id);
  el.addEventListener("keydown", e => {
    if (e.key === "Tab") {
      e.preventDefault();
      const start = el.selectionStart;
      el.value = el.value.substring(0,start) + "  " + el.value.substring(el.selectionEnd);
      el.selectionStart = el.selectionEnd = start + 2;
    }

    const pairs = { "(":")", "[":"]", "{":"}", '"':'"', "'":"'" };
    if (pairs[e.key]) {
      e.preventDefault();
      const start = el.selectionStart;
      el.value = el.value.substring(0,start) + e.key + pairs[e.key] + el.value.substring(el.selectionEnd);
      el.selectionStart = el.selectionEnd = start + 1;
    }

    if (e.key === ">") {
      const start = el.selectionStart;
      const before = el.value.substring(0, start);
      const tagMatch = before.match(/<([a-zA-Z][\w-]*)/);
      if (tagMatch && !before.endsWith("/>")) {
        const tag = tagMatch[1];
        if (!before.endsWith(`</${tag}`)) {
          e.preventDefault();
          el.value = before + ">" + `</${tag}>` + el.value.substring(start);
          el.selectionStart = el.selectionEnd = start + 1;
        }
      }
    }
  });
}

// Resizer
function makeResizable(id, leftId) {
  const resizer = document.getElementById(id);
  const left = document.getElementById(leftId);
  let startX, startW;
  resizer.onmousedown = e => {
    startX = e.clientX;
    startW = left.offsetWidth;
    document.onmousemove = e => {
      left.style.width = (startW + e.clientX - startX) + "px";
    };
    document.onmouseup = () => {
      document.onmousemove = document.onmouseup = null;
    };
  };
}

// Init
window.addEventListener("load", () => {
  const btns = document.getElementById("lang-buttons");
  languages.forEach(lang => {
    const b = document.createElement("button");
    b.className = "lang-btn";
    b.dataset.lang = lang;
    b.textContent = lang.toUpperCase();
    b.onclick = () => loadLanguage(lang);
    btns.appendChild(b);
  });

  loadLanguage("html");
  makeResizable("resize1", "docs");
  setupAutoComplete("editor");
  setupAutoComplete("compiler-editor");
});
</script>
</body>
</html>
